layui.use(["element","layer","jquery","common"],function(){var d=layui.element(),c=layui.layer,f=layui.jquery,e=layui.common;var a=new Array();var g={closeTab:function(){var i=f(this).data("name");var h=f.inArray(i,a);d.tabDelete("page-tab",h);b()},signOut:function(){e.signOut("确认退出系统？","为保存的操作将丢失！",function(){window.location.href="login.html"})}};f(".layui-nav").on("click",".tab-open",function(){b();var h=f.inArray(f(this).data("name"),a);if(h!=-1){d.tabChange("page-tab",h)}else{d.tabAdd("page-tab",{title:f(this).data("name").trim()+" <i class='layui-icon ayui-unselect layui-tab-close close-tab' data-name='"+f(this).data("name").trim()+"' data-type='closeTab'>&#x1006;</i>",content:"<iframe class='tab-main' src='"+f(this).data("href")+"'></iframe>"});d.tabChange("page-tab",a.length);c.msg("页面加载中，请稍后。。。",{icon:16,time:false});changeIframeHeight()}});function b(){a=new Array();var h=f(".page-tab>.layui-tab-title li");f(h).each(function(i,j){a[i]=f(j).text().substr(0,f(j).text().trim().length-2)})}f("#go-dashboard").on("click",function(h){d.tabChange("page-tab",0)});f(".page-tab").on("click",".close-tab",function(){var h=f(this).data("type");g[h]?g[h].call(this):""});f("body").on("click",".sign-out, .do-action",function(){var h=f(this).data("type");g[h]?g[h].call(this):""});f(document).ready(function(){h();function h(){if(f(document).width()<=900){f(".layui-nav").eq(0).removeClass("layui-nav-tree");f(".layui-nav").eq(0).removeClass("layui-nav-side");var i=f(".layui-nav-item");f(i).each(function(j,k){if(j>0){f(k).removeClass("layui-nav-itemed")}})}else{f(".layui-nav").eq(0).addClass("layui-nav-tree");f(".layui-nav").eq(0).addClass("layui-nav-side");var i=f(".layui-nav-item");f(i).each(function(j,k){if(j>0){f(k).addClass("layui-nav-itemed")}})}}f(window).resize(function(){h()})})});changeContentHeight();changeIframeHeight();window.onresize=function(){changeContentHeight();changeIframeHeight()};function changeContentHeight(){var a=document.getElementById("page-content");if(a){a.height=document.documentElement.clientHeight}}function changeIframeHeight(){var b=document.getElementsByClassName("tab-main");if(b.length>=1){for(var a=0;a<=b.length;a++){b[a].height=document.documentElement.clientHeight-120}}};
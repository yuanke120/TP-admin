layui.use(["element","form","jquery","layer","common"],function(){var b=layui.element(),d=layui.form(),e=layui.jquery,a=layui.layer,c=layui.common;d.on("submit(formRole)",function(g){var h=a.msg("数据提交中，请稍等。。。",{icon:16,time:false});c.ajax(e("#formRole").attr("action"),"post","json",g.field,function(i){a.close(h);switch(i.code){case"200":c.alertSuccess(i.msg,null);setTimeout(function(){c.goUrl(i.url)},2000);break;default:c.alertError(i.msg,null);break}});return false});var f={doAdd:function(){var g=e(this).data("href");c.goUrl(g)},doEdit:function(){var g=e(this).data("href");c.goUrl(g)},doDelete:function(){var g=e(this).data("href");var h=e(this).data("value");c.alertDel("确认删除这条信息？","此操作不可逆，请再次确认是否要操作。",function(){c.ajax(g,"post","json",{item:h},function(i){switch(i.code){case"200":c.alertSuccess(i.msg,null);setTimeout(function(){c.goUrl(window.location.pathname)},2000);break;default:c.alertError(i.msg,null);break}})})},doBatchDelete:function(){var g=e(this).data("href");c.alertDel("确认删除这些信息？","此操作不可逆，请再次确认是否要操作。",function(){var h="";e(".icheck").each(function(i,j){if(e(j).is(":checked")){if(e(j).data("value")){h+=e(j).data("value")+","}}});c.ajax(g,"post","json",{items:h},function(i){switch(i.code){case"200":c.alertSuccess(i.msg,null);setTimeout(function(){c.goUrl(window.location.pathname)},2000);break;default:c.alertError(i.msg,null);break}})})},doGoBack:function(){var g=e(this).data("href");c.goUrl(g)}};e(".do-action").on("click",function(){var g=e(this).data("type");f[g]?f[g].call(this):""})});